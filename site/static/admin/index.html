<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Content Manager</title>
  <!-- Include the stylesheets from your site here -->

  <script src="https://identity-js.netlify.com/v1/netlify-identity-widget.js"></script>
</head>

<body>
  
    <link href="/admin/config.yml" type="text/yaml" rel="cms-config-url">

  <script src="https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js", integrity="sha384-Y3nT3INL++8rl8STMFPhakw4afSMouzN8oejpdS9aG31yd0StImDDxrDy9vzdt1M", crossorigin="anonymous"></script>
  <script>

      CMS.registerPreviewStyle("/css/cms.css");
    var PostPreview = createClass({
      render: function() {
        var entry = this.props.entry;
        var date = new Date(entry.getIn(['data', 'date']))
        var dateString = '' + date.getFullYear() + '-' + ("0" + (date.getMonth() + 1)).slice(-2) + '-' + ( "0" + (date.getDate() + 1)).slice(-2);

        var image = entry.getIn(['data', 'image']);
        var bg = this.props.getAsset(image);
        return h('main', {}, h('article', {"className": "post"},
          h('h2', {"className": "post-header"}, entry.getIn(['data', 'title'])),
          h('p', {"className": "post-meta"}, dateString),
           this.props.widgetFor('body')
        ));
      }
    });


    
    CMS.registerPreviewTemplate("post", PostPreview);
    </script>
</body>

</html>